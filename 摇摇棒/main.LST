C51 COMPILER V9.00   MAIN                                                                  05/10/2013 22:26:34 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <reg51.h>
   2          #define uchar unsigned char
   3          #define uint unsigned int    //宏定义
   4          #define KEY P3^0      //定义画面切换按键
   5          uchar KY;      //KY作用在后面说明     
   6          uchar disp;     //显示汉字指针
   7          uchar pic=0,num=0;     //pic为按键次数；num为中断次数
   8          
   9          uchar code love[] = {
  10          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  11          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,0x00,0x20,0x00,0x20,0x00,0x20,
  12          0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x0F,
  13          0x04,0x10,0x02,0x20,0x02,0x20,0x02,0x20,0x02,0x20,0x04,0x10,0xF8,0x0F,0x00,0x00,
  14          0x00,0x00,0x00,0x00,0xFE,0x07,0x00,0x08,0x00,0x10,0x00,0x20,0x00,0x20,0x00,0x10,
  15          0x00,0x08,0xFE,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,0x82,0x20,0x82,0x20,
  16          0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,0x00,0x00,0x00,0x00,0x00,0x00,
  17          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*LOVE*/
  18          };
  19          
  20          uchar code loveyou[] = {
  21          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  22          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  23          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  24          0x78,0x00,0xFC,0x00,0xFE,0x01,0xFE,0x03,0xFE,0x07,0xFE,0x0F,0xFE,0x1F,0xFC,0x3F,
  25          0xF8,0x7F,0xFC,0x3F,0xFE,0x1F,0xFE,0x0F,0xFE,0x07,0xFE,0x03,0xFE,0x01,0xFC,0x00,
  26          0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  27          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  28          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*心形图案*/
  29          };
  30          
  31          uchar code hehe[] = {
  32          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  33          0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x01,0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
  34          0xF0,0x0F,0x08,0x10,0x04,0x20,0x00,0x00,0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
  35          0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x20,
  36          0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
  37          0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,0x00,0x00,0x00,0x00,0x04,0x20,0x08,0x10,
  38          0xF0,0x0F,0x00,0x00,0x00,0x00,0xC0,0x01,0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
  39          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*呵呵o(∩_∩)o图案*/
  40          };
  41          
  42          unsigned char code hanzi[] = {
  43          //-- 欢 --
  44                0x04,0x10,0x34,0x08,0xC4,0x06,0x04,0x01,
  45                0xC4,0x82,0x3C,0x8C,0x20,0x40,0x10,0x30,
  46                0x0F,0x0C,0xE8,0x03,0x08,0x0C,0x08,0x10,
  47                0x28,0x60,0x18,0xC0,0x00,0x40,0x00,0x00,
  48          //-- 迎 --
  49                0x40,0x00,0x42,0x40,0x44,0x20,0xC8,0x1F,
  50                0x00,0x20,0xFC,0x47,0x04,0x42,0x02,0x41,
  51                0x82,0x40,0xFC,0x7F,0x04,0x40,0x04,0x42,
  52                0x04,0x44,0xFE,0x63,0x04,0x20,0x00,0x00,
  53          //-- 使 --
  54                0x40,0x00,0x20,0x00,0xF8,0xFF,0x07,0x00,
  55                0x04,0x80,0xF4,0x43,0x14,0x45,0x14,0x29,
C51 COMPILER V9.00   MAIN                                                                  05/10/2013 22:26:34 PAGE 2   

  56                0x14,0x19,0xFF,0x17,0x14,0x21,0x14,0x21,
  57                0x14,0x41,0xF6,0xC3,0x04,0x40,0x00,0x00,
  58          //-- 用 --
  59                0x00,0x80,0x00,0x60,0xFE,0x1F,0x22,0x02,
  60                0x22,0x02,0x22,0x02,0x22,0x02,0xFE,0x7F,
  61                0x22,0x02,0x22,0x02,0x22,0x42,0x22,0x82,
  62                0xFF,0x7F,0x02,0x00,0x00,0x00,0x00,0x00,
  63          //-- 神 --
  64                0x08,0x01,0x88,0x00,0x49,0x00,0xEE,0xFF,
  65                0x58,0x00,0x88,0x00,0x00,0x00,0xF8,0x1F,
  66                0x88,0x08,0x88,0x08,0xFF,0xFF,0x88,0x08,
  67                0x88,0x08,0xFC,0x1F,0x08,0x00,0x00,0x00,
  68          //-- 奇 --
  69                0x40,0x00,0x40,0x00,0x44,0x00,0x44,0x3E,
  70                0x64,0x12,0x54,0x12,0x4C,0x12,0x47,0x12,
  71                0x4C,0x3F,0x54,0x42,0x74,0x80,0xC6,0x7F,
  72                0x44,0x00,0x60,0x00,0x40,0x00,0x00,0x00,
  73          //-- 魔 --
  74                0x00,0x40,0x00,0x30,0xFE,0x8F,0x4A,0x80,
  75                0xAA,0x5F,0x9A,0x4A,0xFE,0x2A,0xAA,0x1A,
  76                0xCB,0x0F,0xAA,0x7A,0xFE,0x8A,0x9A,0xAA,
  77                0xAA,0x8F,0x6B,0x80,0x22,0xE0,0x00,0x00,
  78          //-- 幻 --
  79                0x80,0x20,0xC0,0x30,0xA0,0x28,0x98,0x24,
  80                0x87,0x22,0x80,0x21,0xC4,0x30,0x04,0x60,
  81                0x04,0x00,0x04,0x20,0x04,0x40,0x04,0x80,
  82                0x04,0x40,0xFE,0x3F,0x04,0x00,0x00,0x00,
  83          //-- 摇 --
  84                0x10,0x02,0x10,0x42,0x10,0x81,0xFF,0x7F,
  85                0x90,0x04,0x54,0x05,0xCC,0xF4,0xB4,0x44,
  86                0x84,0x44,0xBC,0x7F,0x82,0x44,0xA2,0x44,
  87                0x9B,0xF4,0x82,0x06,0x00,0x04,0x00,0x00,
  88          //-- 摇 --
  89                0x10,0x02,0x10,0x42,0x10,0x81,0xFF,0x7F,
  90                0x90,0x04,0x54,0x05,0xCC,0xF4,0xB4,0x44,
  91                0x84,0x44,0xBC,0x7F,0x82,0x44,0xA2,0x44,
  92                0x9B,0xF4,0x82,0x06,0x00,0x04,0x00,0x00,
  93          //-- 棒 --
  94                0x10,0x04,0x10,0x03,0xD0,0x00,0xFF,0xFF,
  95                0x90,0x00,0x54,0x05,0x44,0x12,0xD4,0x15,
  96                0x74,0x14,0x5F,0xFF,0xD4,0x14,0x54,0x15,
  97                0x56,0x12,0x44,0x06,0x40,0x02,0x00,0x00,
  98          //-- ！ --
  99                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 100                0x00,0x00,0x00,0x00,0x7C,0x10,0xFE,0x3B,
 101                0xFE,0x3B,0x7C,0x10,0x00,0x00,0x00,0x00,
 102                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
 103          };
 104          
 105          /*****函数声明*****/
 106          void display1(void);
 107          void display2(void);
 108          void display3(void);
 109          void display4(void);
 110          
 111          /*****n（us）延时子程序*****/
 112          void DelayUs(uint N)
 113          {
 114   1       uint x;
 115   1       for(x=0; x<=N;x++);
 116   1      }
 117          
C51 COMPILER V9.00   MAIN                                                                  05/10/2013 22:26:34 PAGE 3   

 118          /*****中断服务程序*****/
 119          void intersvr0(void) interrupt 0 using 1
 120          {
 121   1       KY=~KY;      //每个摇动来回水银开关会在摆幅两端分别产生下降沿中断，只提取其中一次（从左向右摇才显示）
 122   1       if(KY==0)
 123   1       {
 124   2        num++;     //计算中断次数
 125   2        switch(pic)      //选择画面
 126   2        {
 127   3         case 0:{display1();}break;
 128   3         case 1:{display2();}break;
 129   3         case 2:{display3();}break;
 130   3         case 3:{display4();}break;
 131   3         default:{display1();}  
 132   3        }
 133   2          }
 134   1      }
 135          
 136          /*****显示子程序1（汉字）*****/
 137          void display1(void)
 138          {
 139   1       uchar i;
 140   1       if(num>10){disp++;num=0;}     //12个汉字分为3次显示完（每次显示4个），每中断10次切换
 141   1       if(disp>2)disp=0;
 142   1        DelayUs(5200);     //此处延时时间依各硬件差别而各不相同，试着调整使得显示内容居中即可
 143   1       for(i=0;i<64;i++)
 144   1       {
 145   2           P0=~hanzi[disp*128+i*2];
 146   2           P2=~hanzi[disp*128+i*2+1];
 147   2           DelayUs(100);
 148   2       }
 149   1      }
 150          
 151          /*****显示子程序2（LOVE）*****/
 152          void display2(void)
 153          {
 154   1       uchar i;
 155   1       DelayUs(4000);
 156   1       for(i=0;i<64;i++)
 157   1       {
 158   2           P0=~love[i*2];
 159   2           P2=~love[i*2+1];
 160   2           DelayUs(120);
 161   2       }
 162   1      }
 163          
 164          /*****显示子程序3（心形图案）*****/
 165          void display3(void)
 166          {
 167   1       uchar i;
 168   1        DelayUs(4000);
 169   1       for(i=0;i<64;i++)
 170   1       {
 171   2           P0=~loveyou[i*2];
 172   2           P2=~loveyou[i*2+1];
 173   2           DelayUs(120);
 174   2       }
 175   1      }
 176          
 177          /*****显示子程序4（呵呵o(∩_∩)o图案）*****/
 178          void display4(void)
 179          {
C51 COMPILER V9.00   MAIN                                                                  05/10/2013 22:26:34 PAGE 4   

 180   1       uchar i;
 181   1       DelayUs(4000);
 182   1       for(i=0;i<64;i++)
 183   1       {
 184   2           P0=~hehe[i*2];
 185   2           P2=~hehe[i*2+1];
 186   2           DelayUs(120);
 187   2       }
 188   1      }
 189          
 190          /*****主函数*****/
 191          void main(void)
 192          {
 193   1       IT0=1;
 194   1       EX0=1; 
 195   1       EA=1;      //开中断，下降沿中断
 196   1       KY=0;
 197   1       while(1)     //主程序中只检测按键
 198   1       {
 199   2        if(KEY==0)     //画面切换键按下
 200   2        {
 201   3        DelayUs(10000);     //按键去抖
 202   3        if(KEY==0);
 203   3        pic++;}
 204   2        if(pic>3)pic=0;
 205   2       }
 206   1      }
 207          /*****END*****/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    376    ----
   CONSTANT SIZE    =    768    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
